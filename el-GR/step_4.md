## Ανίχνευση σύγκρουσης

<div style="display: flex; flex-wrap: wrap">
<div style="flex-basis: 200px; flex-grow: 1; margin-right: 15px;">
Τα ατελείωτα παιχνίδια δρομέων συχνά τελειώνουν όταν ο παίκτης συγκρούεται με ένα εμπόδιο.
</div>
<div>

![Εικόνα τελικού βήματος.](images/collision.png){:width="300px"}

</div>
</div>

Τώρα μπορείς να ρυθμίσεις τον παίκτη σου ώστε να αντιδρά σε μια σύγκρουση με εμπόδιο.

<p style="border-left: solid; border-width:10px; border-color: #0faeb0; background-color: aliceblue; padding: 10px;">
Η <span style="color: #0faeb0">**Ανίχνευση σύγκρουσης**</span> καθορίζει πότε αγγίζονται δύο αντικείμενα που δημιουργούνται μέσα σε μια προσομοίωση υπολογιστή — είτε πρόκειται για παιχνίδι, είτε για κινούμενα σχέδια ή κάτι άλλο. Υπάρχουν διάφοροι τρόποι για να γίνει αυτό, για παράδειγμα: 
  - έλεγχος εάν τα χρώματα που εμφανίζονται στη θέση ενός αντικειμένου είναι τα χρώματα αυτού του αντικειμένου ή κάποια διαφορετικά
  - παρακολούθηση του σχήματος κάθε αντικειμένου και έλεγχος εάν αυτά τα σχήματα επικαλύπτονται
  - δημιουργία ενός συνόλου οριακών σημείων, ή γραμμών, γύρω από ένα αντικείμενο και έλεγχος εάν έρχονται σε επαφή με άλλα «συγκρουόμενα» αντικείμενα
Όταν ανιχνευτεί μια τέτοια σύγκρουση, το πρόγραμμα μπορεί να αντιδράσει με κάποιο τρόπο. Σε ένα βιντεοπαιχνίδι, συνήθως προκαλείται μια ζημιά (αν ο παίκτης συγκρουστεί με έναν εχθρό ή μια απειλή) ή δίνεται ένα όφελος (αν ο παίκτης συγκρουστεί με μια πηγή που τον τροφοδοτεί με ενέργεια).
</p>

--- task ---

Στη συνάρτηση `draw_player()`, δημιούργησε τη μεταβλητή που ονομάζεται `collide` και όρισέ την ώστε να παίρνει το χρώμα στη θέση του παίκτη.

--- code ---
---
language: python
filename: main.py - draw_player()
---

collide = get(mouse_x, player_y)

--- /code ---

--- /task ---

--- task ---

Δημιούργησε μια συνθήκη για να ελέγξεις `εάν` η μεταβλητή `collide` είναι ίδια με τη μεταβλητή `safe` — εάν είναι, τότε ο παίκτης σου αγγίζει με ασφάλεια το φόντο και δεν έχει συγκρουστεί με κάποιο εμπόδιο.

Μετακίνησε τον κώδικά σου για να σχεδιάσεις τον παίκτη σου μέσα στη συνθήκη `if collide == safe` και πρόσθεσε κώδικα στην πρόταση `else` για να κάνεις τον παίκτη να αντιδράσει στη σύγκρουση.

**Επίλεξε:** Πώς πρέπει να αντιδρά ο παίκτης σου; Θα μπορούσες να:
+ Αλλάξεις την εικόνα με μια έκδοση `συντριβής (crashed)`
+ Χρησιμοποιήσεις ένα διαφορετικό emoji για τον παίκτη
+ Να χρησιμοποιήσεις το `tint()` για να αλλάξεις την εμφάνιση μιας εικόνας, μην ξεχάσεις να καλέσεις το `no_tint()` αφού σχεδιάσεις την εικόνα

--- collapse ---
---
title: Άλλαξε την εικόνα
---

Μπορείς να χρησιμοποιήσεις μια διαφορετική εικόνα για να αναπαραστήσεις τον παίκτη σου όταν συγκρούεται με ένα εμπόδιο.

Ακολουθεί ένα παράδειγμα:

--- code ---
---
language: python
filename: main.py - draw_player()
---

def draw_player(): 
  player_y = int(height * 0.8)

  collide = get(mouse_x, player_y)

  if collide == safe: #Στο φόντο 
    image(skiing, mouse_x, player_y, 30, 30) 
  else: #Σύγκρουση 
    image(crashed, mouse_x, player_y, 30, 30)

--- /code ---

--- /collapse ---

--- collapse ---
---
title: Χρησιμοποίησε χαρακτήρες emoji
---

Μπορείς να χρησιμοποιήσεις χαρακτήρες emoji στη συνάρτηση p5 `text()` για να αναπαραστήσεις τον παίκτη σου που συγκρούστηκε.

Ακολουθεί ένα παράδειγμα:

--- code ---
---
language: python
filename: main.py - setup()
---

def setup(): 
  size(400, 400) 
  text_size(40) #Ελέγχει το μέγεθος του 
  emoji text_align(CENTER, TOP) #Τοποθετημένο γύρω από το κέντρο

--- /code ---

--- code ---
---
language: python
filename: main.py - draw_obstacles()
---

def draw_player(): 
  if collide == safe: #Στο φόντο 
    text('🎈', mouse_x, player_y) 
  else: #Συγκρούστηκαν 
    text('💥', mouse_x, player_y)

--- /code ---

--- /collapse ---

[[[processing-tint]]]

[[[generic-theory-simple-colours]]]

--- /task ---

--- task ---

**Δοκιμή:** Έλεγξε αν ανιχνεύεται η σύγκρουση και αν η αντίδραση λαμβάνει χώρα κάθε φορά που συμβαίνει μια σύγκρουση.

--- /task ---

--- task ---

**Εντοπισμός σφαλμάτων:** Ενδέχεται να βρεις κάποια σφάλματα στο έργο σου που πρέπει να διορθώσεις. Εδώ είναι μερικά κοινά σφάλματα.

--- collapse ---
---
title: Δεν υπάρχει σύγκρουση όταν ο παίκτης φτάσει σε ένα εμπόδιο
---

Εάν ο χαρακτήρας του παίκτη σου αγγίξει το εμπόδιο και δεν συμβεί τίποτα, υπάρχουν μερικά πράγματα που πρέπει να ελέγξεις:

 - Βεβαιώσου ότι έχεις καλέσει τη συνάρτηση `draw_obstacles()` πριν από την `draw_players()`. Εάν ελέγχεις για συγκρούσεις πριν να σχεδιάσεις τα εμπόδια σε ένα καρέ, τότε δεν θα υπάρχουν εμπόδια για σύγκρουση!
 - Βεβαιώσου ότι χρησιμοποιείς ακριβώς το ίδιο χρώμα όταν σχεδιάζεις το αντικείμενο και στην εντολή `if` που ελέγχει τη σύγκρουση. Μπορείς να βεβαιωθείς για αυτό χρησιμοποιώντας την ίδια `global` μεταβλητή και στα δύο σημεία του κώδικα.
 - Μήπως σχεδίασες τον χαρακτήρα του παίκτη πριν ελέγξεις το χρώμα στις συντεταγμένες του ποντικιού; Αν ναι, θα παίρνεις πάντα τα χρώματα μόνο από τον παίκτη. Πρέπει να ελέγξεις πρώτα το χρώμα και **μετά** να σχεδιάσεις τον παίκτη.
 - Έχεις κώδικα στο τμήμα `else` για να κάνεις κάτι διαφορετικό όταν ανιχνεύεται μια σύγκρουση, όπως το να αλλάξεις μια απόχρωση ή να χρησιμοποιήσεις μια διαφορετική εικόνα;
 - Έχεις βάλει σωστά σε εσοχή τον κώδικα για την εντολή `if` ώστε να εκτελείται όταν η συνθήκη είναι αληθής;

Η εμφάνιση του χρώματος του εικονοστοιχείου που ελέγχεις για σύγκρουση μπορεί να είναι χρήσιμη:

```python
  print(red(collide), green(collide), blue(collide))
```

Μπορείς επίσης να εμφανίσεις έναν κύκλο γύρω από το σημείο που ελέγχεις και να προσαρμόσεις το σημείο που ελέγχεις εάν χρειαστεί:

```python
  no_fill()
  ellipse(mouse_x, player_y, 10, 10) #Σχεδίαση σημείου σύγκρουσης
```

--- /collapse ---

--- /task ---

--- task ---

**Προαιρετικό:** Προς το παρόν, απλώς ανιχνεύεις συγκρούσεις σε ένα εικονοστοιχείο του παίκτη σου. Θα μπορούσες επίσης να ανιχνεύσεις συγκρούσεις σε άλλα εικονοστοιχεία σε ακραία σημεία του παίκτη σου, όπως το κάτω ή το αριστερό και δεξιό άκρο.

--- collapse ---
---
title: Ανίχνευση σύγκρουσης με πολλαπλά εικονοστοιχεία
---

```python
def draw_player():

  player_y = int(height * 0.8)
  #Χρήσιμο για εντοπισμό σφαλμάτων
  #Σχεδίαση κύκλων γύρω από τα εικονοστοιχεία για έλεγχο συγκρούσεων

  no_fill()
  ellipse(mouse_x, player_y, 10, 10) #Σχεδίαση σημείου σύγκρουσης
  ellipse(mouse_x, player_y + 40, 10, 10)
  ellipse(mouse_x - 12, player_y + 20, 10, 10)
  ellipse(mouse_x + 12, player_y + 20, 10, 10)

  collide = get(mouse_x, player_y)
  collide2 = get(mouse_x - 12, player_y + 20)
  collide3 = get(mouse_x + 12, player_y + 20)
  collide4 = get(mouse_x, player_y + 40)

  if mouse_x < width: #Εκτός της αριστερής πλευράς της οθόνης 
    collide2 = safe

  if mouse_x > width: #Εκτός της δεξιάς πλευράς της οθόνης 
    collide3 = safe

  if collide == safe and collide2 == safe and collide3 == safe and collide4 == safe:
    text('🎈', mouse_x, player_y)
  else:
    text('💥', mouse_x, player_y)
```

--- /collapse ---

Θα μπορούσες ακόμη και να χρησιμοποιήσεις έναν βρόχο και να ελέγξεις πολλά διαφορετικά εικονοστοιχεία. Έτσι λειτουργεί η ανίχνευση σύγκρουσης στα παιχνίδια.

--- /task ---

--- save ---
